<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ANYAO - Landing Page</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", sans-serif;
        background-color: #13162a !important;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        position: relative;
      }

      /* ── Star canvas (behind everything, but receives mouse events) ── */
      #starCanvas {
        position: fixed;
        inset: 0;
        pointer-events: none; /* stars interact via JS mousemove, not DOM events */
        z-index: 0;
      }

      /* ── Custom cursor dot ── */
    

      /* ── Centre container ── */
      .landing-container {
        position: relative;
        z-index: 1;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 52px;
        animation: fadeInUp 0.9s ease both;
        /* will-change for smoother parallax */
        will-change: transform;
      }

      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(28px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* ── Logo wrapper – aura only, no box ── */
      .logo-wrapper {
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        will-change: transform;
      }

      /* Aura blob behind the logo */
      .logo-wrapper::before {
        content: "";
        position: absolute;
        width: 520px;
        height: 260px;
        border-radius: 50%;
        background: radial-gradient(
          ellipse at center,
          rgba(73, 244, 223, 0.22) 0%,
          rgba(73, 244, 223, 0.08) 45%,
          transparent 75%
        );
        filter: blur(18px);
        animation: aura-pulse 6s ease-in-out infinite;
        z-index: 0;
      }

      @keyframes aura-pulse {
        10% {
          opacity: 0.85;
          transform: scale(1);
        }
        20% {
          opacity: 1;
          transform: scale(1.05);
        }
        40% {
          opacity: 0.35;
          transform: scale(0.98);
        }
        55% {
          opacity: 0.95;
          transform: scale(1.04);
        }
        75% {
          opacity: 0.3;
          transform: scale(0.97);
        }
        100% {
          opacity: 0.85;
          transform: scale(1);
        }
      }

      .logo-img {
        position: relative;
        z-index: 1;
        height: 220px;
        width: auto;
        display: block;
        filter: drop-shadow(0 0 28px rgba(73, 244, 223, 0.35));
        will-change: transform;
      }

      /* ── Next button ── */
      .btn {
        background: #49f4df;
        color: #0b2e2a;
        border: none;
        padding: 14px 56px;
        font-size: 18px;
        font-weight: 700;
        border-radius: 12px;
        cursor: none;
        letter-spacing: 0.4px;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 10px;
        transition:
          transform 0.2s ease,
          box-shadow 0.2s ease,
          background 0.2s ease;
        box-shadow: 0 4px 28px rgba(73, 244, 223, 0.28);
        will-change: transform;
      }

      .btn:hover {
        transform: translateY(-3px) scale(1.04);
        box-shadow: 0 8px 36px rgba(73, 244, 223, 0.55);
        background: #6af7e8;
      }

      .btn:active {
        transform: translateY(0);
      }

      .btn i {
        font-size: 16px;
        transition: transform 0.2s ease;
      }

      .btn:hover i {
        transform: translateX(5px);
      }

      /* ── Page-transition overlay ── */
      #fadeOverlay {
        position: fixed;
        inset: 0;
        background: #13162a;
        opacity: 0;
        pointer-events: none;
        z-index: 9999;
        transition: opacity 0.6s ease;
      }

      #fadeOverlay.active {
        opacity: 1;
        pointer-events: all;
      }
    </style>
  </head>
  <body>
    <!-- Page-transition overlay -->
    <div id="fadeOverlay"></div>

    <!-- Falling-star canvas -->
    <canvas id="starCanvas"></canvas>

    <!-- Custom cursor dot -->
    <div id="cursorDot"></div>

    <div class="landing-container" id="parallaxContainer">
      <div class="logo-wrapper" id="logoWrapper">
        <img
          src="{{ url_for('static', filename='ANYAO.png') }}"
          alt="ANYAO"
          class="logo-img"
          id="logoImg"
        />
      </div>

      <button class="btn" id="nextBtn">
        Next
        <i class="fa-solid fa-arrow-right"></i>
      </button>
    </div>

    <script>
      /* ═══════════════════════════════════════════════
         1.  STAR CANVAS  (falling + mouse repulsion)
         ═══════════════════════════════════════════════ */
      const canvas = document.getElementById("starCanvas");
      const ctx = canvas.getContext("2d");

      function resize() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
      }
      resize();
      window.addEventListener("resize", resize);

      const STAR_COUNT = 140;
      const stars = [];

      // Track mouse globally
      let mouse = { x: -9999, y: -9999 };
      window.addEventListener("mousemove", (e) => {
        mouse.x = e.clientX;
        mouse.y = e.clientY;
      });

      function randomStar() {
        return {
          x: Math.random() * canvas.width,
          y: Math.random() * canvas.height - canvas.height,
          len: Math.random() * 18 + 6,
          speed: Math.random() * 2.5 + 1,
          opacity: Math.random() * 0.6 + 0.3,
          size: Math.random() * 1.5 + 0.5,
          angle: Math.PI / 2 + (Math.random() - 0.5) * 0.3,
        };
      }

      for (let i = 0; i < STAR_COUNT; i++) {
        const s = randomStar();
        s.y = Math.random() * canvas.height;
        stars.push(s);
      }

      function drawStar(s) {
        const dx = Math.cos(s.angle);
        const dy = Math.sin(s.angle);

        const grd = ctx.createLinearGradient(
          s.x,
          s.y,
          s.x - dx * s.len,
          s.y - dy * s.len,
        );
        grd.addColorStop(0, `rgba(255, 220, 60, ${s.opacity})`);
        grd.addColorStop(1, `rgba(255, 220, 60, 0)`);

        ctx.beginPath();
        ctx.moveTo(s.x, s.y);
        ctx.lineTo(s.x - dx * s.len, s.y - dy * s.len);
        ctx.strokeStyle = grd;
        ctx.lineWidth = s.size;
        ctx.stroke();

        ctx.beginPath();
        ctx.arc(s.x, s.y, s.size * 0.9, 0, Math.PI * 2);
        ctx.fillStyle = `rgba(255, 245, 180, ${s.opacity})`;
        ctx.fill();
      }

      function updateStar(s) {
        s.x += Math.cos(s.angle) * s.speed;
        s.y += Math.sin(s.angle) * s.speed;

        if (
          s.y > canvas.height + s.len ||
          s.x < -s.len ||
          s.x > canvas.width + s.len
        ) {
          Object.assign(s, randomStar());
        }
      }

      /* ═══════════════════════════════════════════════
         2.  CURSOR TRAIL  (glowing teal particles)
         ═══════════════════════════════════════════════ */
      const cursorDot = document.getElementById("cursorDot");

      const TRAIL_MAX = 28;
      const trail = []; // { x, y, life, maxLife }

      function spawnTrailParticle(x, y) {
        trail.push({
          x,
          y,
          life: 1.0,
          maxLife: 1.0,
          r: Math.random() * 3 + 1.5,
        });
        if (trail.length > TRAIL_MAX) trail.shift();
      }

      window.addEventListener("mousemove", (e) => {
        cursorDot.style.left = e.clientX + "px";
        cursorDot.style.top = e.clientY + "px";
        spawnTrailParticle(e.clientX, e.clientY);
      });

      function drawTrail() {
        for (let i = trail.length - 1; i >= 0; i--) {
          const p = trail[i];
          p.life -= 0.045;
          if (p.life <= 0) {
            trail.splice(i, 1);
            continue;
          }

          const alpha = p.life;
          ctx.beginPath();
          ctx.arc(p.x, p.y, p.r * p.life, 0, Math.PI * 2);
          ctx.fillStyle = `rgba(73, 244, 223, ${alpha * 0.75})`;
          ctx.shadowColor = "#49f4df";
          ctx.shadowBlur = 8;
          ctx.fill();
          ctx.shadowBlur = 0;
        }
      }

      /* ═══════════════════════════════════════════════
         3.  MAIN ANIMATION LOOP
         ═══════════════════════════════════════════════ */
      function loop() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // Draw trail first (below stars)
        drawTrail();

        // Draw stars
        stars.forEach((s) => {
          updateStar(s);
          drawStar(s);
        });

        requestAnimationFrame(loop);
      }
      loop();

      /* ═══════════════════════════════════════════════
         4.  PARALLAX  (logo + button follow mouse)
         ═══════════════════════════════════════════════ */
      const logoWrapper = document.getElementById("logoWrapper");
      const nextBtn = document.getElementById("nextBtn");

      // Parallax layers: higher multiplier = more motion
      const LOGO_DEPTH = 18; // px max shift
      const BTN_DEPTH = 10;

      let parallaxX = 0,
        parallaxY = 0;
      let targetPX = 0,
        targetPY = 0;

      window.addEventListener("mousemove", (e) => {
        // Normalise to [-1, 1] from screen centre
        const nx = (e.clientX / window.innerWidth - 0.5) * 2;
        const ny = (e.clientY / window.innerHeight - 0.5) * 2;
        targetPX = nx;
        targetPY = ny;
      });

      function parallaxLoop() {
        // Smooth lerp toward target
        parallaxX += (targetPX - parallaxX) * 0.065;
        parallaxY += (targetPY - parallaxY) * 0.065;

        // Logo moves opposite to cursor (classic depth illusion)
        logoWrapper.style.transform = `translate(${-parallaxX * LOGO_DEPTH}px, ${-parallaxY * LOGO_DEPTH}px)`;

        // Button moves slightly less, same direction as logo
        nextBtn.style.transform = `translate(${-parallaxX * BTN_DEPTH}px, ${-parallaxY * BTN_DEPTH}px)`;

        requestAnimationFrame(parallaxLoop);
      }
      parallaxLoop();

      /* ═══════════════════════════════════════════════
         5.  FADE-OUT TRANSITION ON NEXT CLICK
         ═══════════════════════════════════════════════ */
      document.getElementById("nextBtn").addEventListener("click", function () {
        const overlay = document.getElementById("fadeOverlay");
        overlay.classList.add("active");
        setTimeout(function () {
          window.location.href = "/home";
        }, 620);
      });
    </script>
  </body>
</html>
